/**
 *
 * Carlos III University of Madrid.
 *
 * Master Final Thesis: Heartbeat classifier based on ANN (Artificial Neural
 * Network).
 *
 * Author: Pedro Marcos Solórzano
 * Tutor: Luis Mengibar Pozo (Tutor)
 *
 *
 * Main source file
 *
 *
 */

#include "main.h"

int main(void){
  /*
   * Local declarations.
   */
  XGpio led;
  FRESULT fStatus;
  FATFS fileSystem;
  FIL file;
  int status;

  /*
   * LED's GPIO Initialization
   */
  status = XGpio_Initialize(&led, LED_DEVICE_ID);
  if (status != XST_SUCCESS) {
      cerr<<"ERROR: GPIO failure."<<endl;
      return XST_FAILURE;
  }
  XGpio_SetDataDirection(&led, LED_CHANNEL, LED_DIRECTION_MASK);
  XGpio_DiscreteWrite(&led,LED_CHANNEL,LED_READY_STATE);

  /*
   * Introduction
   */
  cout<<endl<<"FEEDFORWARD ARTIFITIAL NEURONAL NETWORK"<<endl<<endl;

  /*
   * Initialize the memory file system
   */
  fStatus = f_mount(&fileSystem, FS_PATH, 0);
  if (fStatus != FR_OK) {
      xil_printf("ERROR: Failed mounting SD memory on %s.\r\n",FS_PATH);
      XGpio_DiscreteWrite(&led,LED_CHANNEL,LED_ERROR_STATE);
      return XST_FAILURE;
  }
  return 0;
}
